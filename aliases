#
# Copyright 2012 Victor Penso
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#

# move cursor one word left/right using Ctrl instead of Esc
bindkey '^B' backward-word
bindkey '^F' forward-word

alias a+x="chmod a+x"
alias go-="chmod go-rwx"

alias 0=clear
alias x=exit
alias v=vim
alias m=music
alias _=" sudo"
alias _!=" sudo !!"
alias ls='ls -Fh --color=always'
alias l='ls -1'
alias ll='ls -l'
alias l.='ls -lA -d .*'
alias g=git
alias t=tmux
alias tl="tmux list-sessions"
alias ta="tmux attach-session"

alias man="MANWIDTH=80 MANPAGER=less man"
alias npm="nocorrect npm"
alias vm="nocorrect vm"

#
#  ----( Remote Login, Keys and Encryption )----
#
alias scp="noglob scp"
# use archive mode by default
alias rsync='rsync -avzrtp'
# remote login as root
alias rssh='ssh -l root'
# less secure but faster
alias fssh='ssh -C4c arcfour,blowfish-cbc'
# agent forwarding
alias ssha='ssh -A'
# spy on the SSH traffic
alias sshdump='tcpdump -lnn -i any port ssh and tcp-syn'
# compression by default for remote mounts
alias sshfs='sshfs -C'
# generating key-pairs, use `-f <PATH>` to provide the location
alias ssh-keygen-ecdsa="ssh-keygen -t ecdsa -b 521 "
alias ssh-keygen-rsa='ssh-keygen -t rsa -b 4096'
alias ssh-keygen-no-password="ssh-keygen -q -t rsa -b 2048 -N ''"

#
#  ----( Searching )-----       
#

alias f="find . -type f -exec grep -l \"$1\" {} \;;"

# colorize matched patterns when using `grep` by default
export GREP_OPTIONS='--color=auto'
# exclude version control repositories from search
for PATTERN in .cvs .git .hg .svn; do
   GREP_OPTIONS="$GREP_OPTIONS --exclude-dir=$PATTERN"
done
export GREP_COLOR='1;38;5;52;48;5;166'

export ACK_PAGER_COLOR="less -x4SRFX"
alias ack='ack-grep -a'






alias pscpu="ps -A -o ruser,pcpu,time,state,args --sort pcpu"
alias psrun="ps r -AL -o stat,pid,user,psr,pcpu,pmem,args"


alias path='echo -e ${PATH//:/\\n}'
alias cpu=lscpu
alias ports='netstat -tulanp'
alias epoch="date +%s"
alias get="curl -C - -O"
alias usage="du -k * | sort -nr | cut -f2 | xargs -d '\n' du -sh"
alias ascii="man ascii"
alias mute="amixer --quiet set Master toggle"
alias volume="amixer --quiet set Master"

# (re)set git mail address environment variable
function git-mail() {
  local mail=${1:-"user@localhost"}
  export GIT_AUTHOR_EMAIL=$mail
  echo "GIT_AUTHOR_EMAIL=$GIT_AUTHOR_EMAIL"
}

# connect to a service module using IPMI serial over lan
function sol() { 
  local host=$1
  local user=$2
  ipmitool -I lanplus -H $host -U $user -a sol activate 
}

# stdin is exported as environment variable
function exp() { read n; export $1=$n }
# pipe into the NODES environment variable
alias -g NS='| exp NODES'
# run Clustershell using the NODES environment variable
alias rush='clush -l root -w $NODES'
# quick export NODES environment variable
function NODES() {
  if [ $# -lt 1 ]
  then
    echo $NODES
  else
    export NODES=$@
  fi
}

function uri-encode() { echo -ne $@ | xxd -plain | tr -d '\n' | sed 's/\(..\)/%\1/g' ; }

export BROWSER=${BROWSER:-"chromium-browser"}

function @google-translate() { 
  local lang=${1:-"en/de"}
  shift 2>-
  $BROWSER "http://translate.google.com/#$lang/$(uri-encode $@)" 
}

alias @g.t="@google-translate de/en"

function @google() { 
  local lang=${1:-"en"}
  shift 2>-
  $BROWSER "http://www.google.com/search?h1=$lang#q=$(uri-encode $@)"
}

alias @g="@google en"
alias @g.de="@google de"

function @wikipedia() {
  local lang=${1:-"en"}
  shift 2>-
  $BROWSER "http://$lang.wikipedia.org/w/index.php?search=$(uri-encode $@)"
}

alias @w="@wikipedia en"
alias @w.de="@wikipedia de"

function @stackexchange() { $BROWSER "http://stackexchange.com/search?q=$(uri-encode $@)" ; }

# vim: set syntax=sh:
